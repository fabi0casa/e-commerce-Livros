<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../icon.png">
    <title>Minha Conta - Livraria</title>
    <link rel="stylesheet" href="css/livraria.css">
    <link rel="stylesheet" href="css/conta.css">
    <style>
    </style>
</head>
<body>
    <script src="js/header.js"></script>
    <div class="container">
        <nav class="menu">
            <button onclick="mostrarSecao('info')">Minha Conta</button>
            <button onclick="mostrarSecao('alterar')">Alterar Dados</button>
            <button onclick="mostrarSecao('endereco')">Novo Endereço</button>
            <button onclick="mostrarSecao('cartao')">Novo Cartão</button>
            <button onclick="mostrarSecao('pedidos')">Meus Pedidos</button>
        </nav>
        
        <section class="conteudo">
            <div id="info" class="secao ativa">
                <h2>Minha Conta</h2>
                <p><strong>Nome:</strong> João Silva</p>
                <p><strong>Email:</strong> joao@email.com</p>
                <p><strong>Telefone:</strong> (11) 99999-9999</p>
                <p><strong>Data de Nascimento:</strong> 15/08/1990</p>
                <p><strong>Gênero:</strong> Masculino</p>
                <p><strong>CPF:</strong> 888.888.888-08</p>
                <button onclick="openModal('addressModal')">Ver Endereços</button>
                <button onclick="openModal('cardModal')">Ver Cartões</button>
            </div>
            <!-- Modal de Endereços -->
            <div id="addressModal" class="modal">
                <div class="modal-content">
                    <span class="close" onclick="closeModal('addressModal')">&times;</span>
                    <h2>Endereços Cadastrados</h2>

                    <button class="accordion">Rua Exemplo, 123 - São Paulo, SP</button>
                    <div class="panel">
                        <p><strong>Tipo:</strong> Apartamento</p>
                        <p><strong>Logradouro:</strong> Rua Exemplo</p>
                        <p><strong>Número:</strong> 123</p>
                        <p><strong>Bairro:</strong> Centro</p>
                        <p><strong>CEP:</strong> 01000-000</p>
                        <p><strong>Cidade:</strong> São Paulo</p>
                        <p><strong>Estado:</strong> SP</p>
                        <p><strong>País:</strong> Brasil</p>
                        <p><strong>Observação:</strong> Próximo ao metrô</p>
                    </div>

                    <button class="accordion">Av. Teste, 456 - Rio de Janeiro, RJ</button>
                    <div class="panel">
                        <p><strong>Tipo:</strong> Casa</p>
                        <p><strong>Logradouro:</strong> Av. Teste</p>
                        <p><strong>Número:</strong> 456</p>
                        <p><strong>Bairro:</strong> Copacabana</p>
                        <p><strong>CEP:</strong> 22000-000</p>
                        <p><strong>Cidade:</strong> Rio de Janeiro</p>
                        <p><strong>Estado:</strong> RJ</p>
                        <p><strong>País:</strong> Brasil</p>
                        <p><strong>Observação:</strong> Casa de Praia</p>
                    </div>
                </div>
            </div>

            <!-- Modal de Cartões -->
            <div id="cardModal" class="modal">
                <div class="modal-content">
                    <span class="close" onclick="closeModal('cardModal')">&times;</span>
                    <h2>Cartões Cadastrados</h2>

                    <button class="accordion">**** **** **** 1234</button>
                    <div class="panel">
                        <p><strong>Nome Impresso:</strong> João Silva</p>
                        <p><strong>Bandeira:</strong> Visa</p>
                        <p><strong>Código de Segurança:</strong> 123</p>
                        <p><strong>Preferencial:</strong> Sim</p>
                    </div>

                    <button class="accordion">**** **** **** 5678</button>
                    <div class="panel">
                        <p><strong>Nome Impresso:</strong> João Silva</p>
                        <p><strong>Bandeira:</strong> MasterCard</p>
                        <p><strong>Código de Segurança:</strong> 456</p>
                        <p><strong>Preferencial:</strong> Não</p>
                    </div>
                </div>
            </div>

            <div id="alterar" class="secao">
                <h2>Alterar Dados</h2>
                <form class="formulario">
                    <label>Nome Completo:</label>
                    <input type="text" required>

                    <label>Data de Nascimento:</label>
                    <input type="date" required>

                    <label>CPF:</label>
                    <input type="text" required placeholder="000.000.000-00">

                    <label>Gênero:</label>
                    <select required>
                        <option value="">Selecione</option>
                        <option value="masculino">Masculino</option>
                        <option value="feminino">Feminino</option>
                        <option value="outro">Outro</option>
                        <option value="nao_informar">Prefiro não informar</option>
                    </select>

                    <h3>Contato</h3>
                    <label>Tipo de Telefone:</label>
                    <select required>
                        <option value="">Selecione</option>
                        <option value="celular">Celular</option>
                        <option value="residencial">Residencial</option>
                        <option value="comercial">Comercial</option>
                    </select>

                    <label>DDD:</label>
                    <input type="text" required placeholder="Ex: 11">

                    <label>Número:</label>
                    <input type="text" required placeholder="Ex: 99999-9999">

                    <label>Email:</label>
                    <input type="email" required>
                    <button>Salvar Alterações</button>
                </form>
            </div>

            <div id="endereco" class="secao">
                <h2>Cadastrar Novo Endereço</h2>
                <form class="formulario">
                    <label>Tipo de Residência:</label>
                    <select required>
                        <option value="">Selecione</option>
                        <option value="casa">Casa</option>
                        <option value="apartamento">Apartamento</option>
                        <option value="outro">Outro</option>
                    </select>
        
                    <label>Tipo de Logradouro:</label>
                    <input type="text" required placeholder="Ex: Rua, Avenida...">
        
                    <label>Logradouro:</label>
                    <input type="text" required>
        
                    <label>Número:</label>
                    <input type="text" required>
        
                    <label>Bairro:</label>
                    <input type="text" required>
        
                    <label>CEP:</label>
                    <input type="text" required placeholder="00000-000">
        
                    <label>Cidade:</label>
                    <input type="text" required>
        
                    <label>Estado:</label>
                    <input type="text" required>
        
                    <label>País:</label>
                    <input type="text" required value="Brasil">
                    
                    <label>Observação (Opcional):</label>
                    <textarea></textarea>
        
                    <h3>Tipos de Endereço</h3>
                    <label>Usar como Endereço de Residência?</label>
                    <select id="residencia" required>
                        <option value="">Selecione</option>
                        <option value="sim">Sim</option>
                        <option value="nao">Não</option>
                    </select>
        
                    <label>Usar como Endereço de Entrega?</label>
                    <select id="entrega" required>
                        <option value="">Selecione</option>
                        <option value="sim">Sim</option>
                        <option value="nao">Não</option>
                    </select>
        
                    <label>Usar como Endereço de Cobrança?</label>
                    <select id="cobranca" required>
                        <option value="">Selecione</option>
                        <option value="sim">Sim</option>
                        <option value="nao">Não</option>
                    </select>
        
                    <h6>*O endereço precisa ser pelo menos uma dessas opções acima</h6>
                    <button type="submit">Salvar Endereço</button>
                </form>
            </div>
            <!-- Modal de Erro -->
            <div id="errorModal" class="modal">
                <div class="modal-content">
                    <span class="close" onclick="closeModal('errorModal')">&times;</span>
                    <h2>Erro!</h2>
                    <p>Você deve selecionar "Sim" em pelo menos um tipo de endereço.</p>
                    <button onclick="closeModal('errorModal')">OK</button>
                </div>
            </div>

            <div id="cartao" class="secao">
                <h2>Cadastrar Novo Cartão</h2>
                <form class="formulario">
                    <label>Número do Cartão:</label>
                    <input type="text" required>
        
                    <label>Nome Impresso:</label>
                    <input type="text" required>
        
                    <label>Bandeira:</label>
                    <select required>
                        <option value="">Selecione</option>
                        <option value="Visa">Visa</option>
                        <option value="Elo">Elo</option>
                        <option value="MasterCard">Mastercard</option>
                    </select>
        
                    <label>Código de segurança:</label>
                    <input type="text" required>
        
                    <label>Tornar esse cartão preferencial?</label>
                    <select required>
                        <option value="">Selecione</option>
                        <option value="sim">Sim</option>
                        <option value="nao">Não</option>
                    </select>
                    <button>Salvar Cartão</button>
                </form>
            </div>

            <div id="pedidos" class="secao">
                <h2>Meus Pedidos</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Data</th>
                            <th>Livro</th>
                            <th>Quantidade</th>
                            <th>Valor</th>
                            <th>Forma de Pagamento</th>
                            <th>Status da Compra</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>2025-02-21</td>
                            <td>O Senhor dos Anéis</td>
                            <td>1</td>
                            <td>R$ 150,00</td>
                            <td>Cartão de Crédito</td>
                            <td class="status-cell"><span class="status-btn aprovado">Aprovado</span></td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>2025-02-20</td>
                            <td>1984</td>
                            <td>2</td>
                            <td>R$ 250,00</td>
                            <td>Cupom</td>
                            <td class="status-cell"><span class="status-btn transito">Em Transporte</span></td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>2025-02-19</td>
                            <td>Dom Quixote</td>
                            <td>1</td>
                            <td>R$ 75,00</td>
                            <td>Cartão de Crédito</td>
                            <td class="status-cell"><span class="status-btn entregue">Entregue</span></td>
                            <td>
                                <button class="status-btn troca" onclick="confirmarAcao(this, 'Em Troca')">Solicitar Troca</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- Modal de Confirmação -->
            <div id="modalConfirmacao" class="modal">
                <div class="modal-content">
                    <h2>Confirmar Ação</h2>
                    <p>Deseja realmente solicitar a Troca desse produto?</p>
                    <div id="checkboxContainer" style="display: none;">
                    </div>
                    </br>
                    <button id="confirmarBtn">Confirmar</button>
                    <button onclick="fecharModal()">Cancelar</button>
                </div>
            </div>
        </section>
    </div>

    <script>
        function mostrarSecao(secao) {
            document.querySelectorAll('.secao').forEach(el => el.classList.remove('ativa'));
            document.getElementById(secao).classList.add('ativa');
        }

        document.getElementById("endereco").addEventListener("submit", function (event) {
            let residencia = document.getElementById("residencia").value;
            let entrega = document.getElementById("entrega").value;
            let cobranca = document.getElementById("cobranca").value;

            // Verifica se pelo menos um campo tem "Sim"
            if (residencia === "sim" || entrega === "sim" || cobranca === "sim") {

            } else {
                event.preventDefault();
                openModal('errorModal'); // Exibe o modal de erro
            }
        });

        function openModal(modalId) {
            document.getElementById(modalId).style.display = "flex";
        }
    
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = "none";
        }
        // Script para o efeito de accordion (lingueta que desce)
        document.addEventListener("DOMContentLoaded", function () {
            let accordions = document.querySelectorAll(".accordion");

            accordions.forEach(button => {
                button.addEventListener("click", function () {
                    let panel = this.nextElementSibling;
                    if (panel.style.display === "block") {
                        panel.style.display = "none";
                    } else {
                        panel.style.display = "block";
                    }
                });
            });
        });

        let botaoClicado;
        let novoStatus;
        let precisaCheckbox = false;

        function confirmarAcao(botao, status) {
            botaoClicado = botao;
            novoStatus = status;

            document.getElementById("modalConfirmacao").style.display = "flex";
        }

        function fecharModal() {
            document.getElementById("modalConfirmacao").style.display = "none";
        }

        document.getElementById("confirmarBtn").addEventListener("click", function() {
            alterarStatus(botaoClicado, novoStatus);
            fecharModal();
        });

        function alterarStatus(botao, status) {
            let row = botao.closest("tr");
            let statusCell = row.querySelector(".status-cell");
            let actionsCell = botao.closest("td");

            if (!statusCell || !actionsCell) return;

            statusCell.innerHTML = `<span class="status-btn ${getClass(status)}">${status}</span>`;
            actionsCell.innerHTML = novoBotao(status);
        }

        function novoBotao(status) {
            switch (status) {
                case "Aprovada":
                    return `<button class="status-btn transito" onclick="confirmarAcao(this, 'Em Transporte')">Despachar</button>`;
                case "Reprovada":
                    return "";
                case "Em Transporte":
                    return `<button class="status-btn entregue" onclick="confirmarAcao(this, 'Entregue')">Confirmar Entrega</button>`;
                case "Entregue":
                    return `<span class="status-btn finalizado">Finalizado</span>`;
                case "Trocado":
                    return `<span class="status-btn troca-autorizada">Troca Autorizada</span>`;
                default:
                    return "";
            }
        }

        function getClass(status) {
            switch (status) {
                case "Em Processamento": return "processando";
                case "Aprovada": return "aprovado";
                case "Reprovada": return "reprovado";
                case "Em Transporte": return "transito";
                case "Entregue": return "entregue";
                case "Em Troca": return "troca";
                default: return "";
            }
        }
    </script>

</body>
</html>
